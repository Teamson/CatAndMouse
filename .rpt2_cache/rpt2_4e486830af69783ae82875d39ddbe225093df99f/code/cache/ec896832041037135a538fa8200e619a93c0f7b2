{
  "code": "import PlayerDataMgr from \"../Libs/PlayerDataMgr\";\r\nexport default class SkinUI extends Laya.Scene {\r\n    constructor() {\r\n        super();\r\n        this.topBg = this['topBg'];\r\n        this.bgPic = this['bgPic'];\r\n        this.backBtn = this['backBtn'];\r\n        this.skinPic = this['skinPic'];\r\n        this.coinNum = this['coinNum'];\r\n        this.skinNode = this['skinNode'];\r\n        this.unlockBtn = this['unlockBtn'];\r\n        this.unlockNum = this['unlockNum'];\r\n        this.chosenId = -1;\r\n    }\r\n    onOpened() {\r\n        Laya.timer.frameLoop(1, this, this.undateCB);\r\n        this.backBtn.on(Laya.Event.CLICK, this, this.backBtnCB);\r\n        this.unlockBtn.on(Laya.Event.CLICK, this, this.unlockBtnCB);\r\n        this.skinPic.skin = 'pfsy/pfsy_pf/m_' + (PlayerDataMgr.getPlayerData().playerId + 1) + '.png';\r\n        this.topBg.y = this.bgPic.y - this.topBg.height;\r\n        this.initItems();\r\n    }\r\n    onClosed() {\r\n        Laya.timer.clearAll(this);\r\n    }\r\n    initItems() {\r\n        for (let i = 0; i < this.skinNode.numChildren; i++) {\r\n            let item = this.skinNode.getChildAt(i);\r\n            let bg = item.getChildByName('bg');\r\n            let pic = item.getChildByName('pic');\r\n            let tick = item.getChildByName('tick');\r\n            tick.visible = false;\r\n            if (PlayerDataMgr.getPlayerData().playerId == i) {\r\n                bg.skin = 'pfk/pfk_ysz.png';\r\n                tick.visible = true;\r\n            }\r\n            else if (PlayerDataMgr.getPlayerData().playerArr[i] == 1) {\r\n                bg.skin = 'pfk/pfk_yjs.png';\r\n            }\r\n            else if (PlayerDataMgr.getPlayerData().playerArr[i] == 0) {\r\n                if (i == this.chosenId) {\r\n                    bg.skin = 'pfk/pfk_xzjs.png';\r\n                }\r\n                else {\r\n                    bg.skin = 'pfk/pfk_wjs.png';\r\n                }\r\n            }\r\n            pic.skin = 'pfsy/pfsy_pf/m_' + (i + 1) + '.png';\r\n            pic.visible = PlayerDataMgr.getPlayerData().playerArr[i] == 1;\r\n            item.off(Laya.Event.CLICK, this, this.itemCB);\r\n            item.on(Laya.Event.CLICK, this, this.itemCB, [i]);\r\n        }\r\n    }\r\n    itemCB(id) {\r\n        this.chosenId = -1;\r\n        if (PlayerDataMgr.getPlayerData().playerId == id)\r\n            return;\r\n        if (PlayerDataMgr.getPlayerData().playerArr[id] == 1) {\r\n            PlayerDataMgr.getPlayerData().playerId = id;\r\n        }\r\n        else if (PlayerDataMgr.getPlayerData().playerArr[id] == 0) {\r\n            this.chosenId = id;\r\n        }\r\n        this.initItems();\r\n    }\r\n    undateCB() {\r\n        this.coinNum.value = PlayerDataMgr.getPlayerData().coin.toString();\r\n    }\r\n    unlockBtnCB() {\r\n    }\r\n    backBtnCB() {\r\n        Laya.Scene.open('MyScenes/StartUI.scene');\r\n    }\r\n}\r\n",
  "references": [
    "E:/LayaProjects/CatAndMouse/src/Libs/PlayerDataMgr.ts"
  ]
}
